/* LVR Luxury Homepage - Global Styles */
/* Testing GitHub + Vercel Slack notifications */

@tailwind base;
@tailwind components;
@tailwind utilities;

:root {
  /* Brand Identity Color System */
  --rose-wax-red: #A14C41;
  --warm-sand: #E9DDD2;
  --ivory-white: #FAF7F2;
  --cinematic-black: #1C1A18;
  --muted-brown: #7B6A5A;

  /* Mobile viewport & safe areas */
  --header-h-sm: 56px;
  --header-h-md: 72px;

  /* Legacy tokens (mapped to new system) */
  --cream: var(--ivory-white);
  --espresso: var(--cinematic-black);
  --coffee: var(--muted-brown);
  --rose-1: var(--rose-wax-red);
  --rose-2: var(--rose-wax-red);
  --ink: var(--cinematic-black);
}

@layer base {
  html {
    scroll-behavior: smooth;
  }

  body {
    @apply bg-cream text-espresso;
  }

  h1, h2, h3, h4, h5, h6 {
    @apply text-ink;
  }
}

/* ============================================
   CTA Button Keyframe Animations
   (Must be outside @layer for proper rendering)
   ============================================ */

/* Lava lamp drift - smooth organic motion */
@keyframes lvrLavaDrift {
  0%   { transform: translate3d(-8%, -6%, 0) scale(1); }
  25%  { transform: translate3d(7%, -2%, 0) scale(1.08); }
  50%  { transform: translate3d(8%, 6%, 0) scale(0.96); }
  75%  { transform: translate3d(-5%, 8%, 0) scale(1.05); }
  100% { transform: translate3d(-8%, -6%, 0) scale(1); }
}

/* Secondary drift for depth/parallax */
@keyframes lvrLavaDrift2 {
  0%   { transform: translate3d(6%, 4%, 0) scale(1.02); }
  33%  { transform: translate3d(-5%, -3%, 0) scale(0.98); }
  66%  { transform: translate3d(-7%, 5%, 0) scale(1.04); }
  100% { transform: translate3d(6%, 4%, 0) scale(1.02); }
}

/* Color morph animation with movement */
@keyframes lvrColorFlow {
  0%   {
    opacity: 0.92;
    filter: saturate(135%) hue-rotate(0deg) blur(10px);
    transform: translate3d(-12%, -8%, 0) scale(1.08);
  }
  25%  {
    opacity: 0.98;
    filter: saturate(145%) hue-rotate(8deg) blur(14px);
    transform: translate3d(10%, -3%, 0) scale(0.95);
  }
  50%  {
    opacity: 0.90;
    filter: saturate(140%) hue-rotate(-5deg) blur(12px);
    transform: translate3d(12%, 10%, 0) scale(1.05);
  }
  75%  {
    opacity: 0.95;
    filter: saturate(138%) hue-rotate(3deg) blur(13px);
    transform: translate3d(-8%, 8%, 0) scale(0.97);
  }
  100% {
    opacity: 0.92;
    filter: saturate(135%) hue-rotate(0deg) blur(10px);
    transform: translate3d(-12%, -8%, 0) scale(1.08);
  }
}

/* Hover: Gradient reacts and pulls away with rumbling effect */
@keyframes lvrHoverRumble {
  0%   { transform: translate3d(0, 0, 0) scale(1.08); }
  10%  { transform: translate3d(-4%, 3%, 0) scale(1.10); }
  20%  { transform: translate3d(3%, -3%, 0) scale(1.06); }
  30%  { transform: translate3d(-3%, -4%, 0) scale(1.12); }
  40%  { transform: translate3d(4%, 2%, 0) scale(1.08); }
  50%  { transform: translate3d(-2%, 4%, 0) scale(1.10); }
  60%  { transform: translate3d(3%, -2%, 0) scale(1.06); }
  70%  { transform: translate3d(-4%, 1%, 0) scale(1.11); }
  80%  { transform: translate3d(4%, -4%, 0) scale(1.09); }
  90%  { transform: translate3d(-3%, 2%, 0) scale(1.10); }
  100% { transform: translate3d(0, 0, 0) scale(1.08); }
}

/* Conic gradient rotation for premium sheen */
@keyframes lvrConicSpin {
  0%   { transform: rotate(0deg) scale(1.02); }
  100% { transform: rotate(360deg) scale(1.02); }
}

/* Sparkle pulse for jeweled effect */
@keyframes lvrSparkle {
  0%, 100% { opacity: 0.2; filter: blur(0.5px); }
  50%      { opacity: 0.5; filter: blur(1px); }
}

/* Border color pulse on hover */
@keyframes lvrBorderPulse {
  0%, 100% {
    box-shadow:
      0 0 0 1px rgba(199,130,255,0.5),
      0 0 20px rgba(199,130,255,0.4),
      0 0 40px rgba(125,180,255,0.2);
  }
  33% {
    box-shadow:
      0 0 0 1px rgba(125,180,255,0.5),
      0 0 20px rgba(125,180,255,0.4),
      0 0 40px rgba(110,230,195,0.2);
  }
  66% {
    box-shadow:
      0 0 0 1px rgba(110,230,195,0.5),
      0 0 20px rgba(110,230,195,0.4),
      0 0 40px rgba(199,130,255,0.2);
  }
}

@layer utilities {
  .bg-rose-grad {
    background: linear-gradient(135deg, var(--rose-1), var(--rose-2));
  }

  .text-espresso {
    color: var(--espresso);
  }

  .text-ink {
    color: var(--ink);
  }

  .paper-grain {
    mix-blend-mode: multiply;
    opacity: 0.12;
    pointer-events: none;
  }

  /* Reduce motion for accessibility */
  @media (prefers-reduced-motion: reduce) {
    *,
    *::before,
    *::after {
      animation-duration: 0.01ms !important;
      animation-iteration-count: 1 !important;
      transition-duration: 0.01ms !important;
    }
  }

  /* Custom focus styles for accessibility */
  .focus-ring {
    @apply focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-[#7C3AED]/70 focus-visible:ring-offset-2;
  }

  /* Mobile touch targets & safe areas */
  .touch-target {
    min-height: 44px;
    min-width: 44px;
  }

  .safe-top {
    padding-top: env(safe-area-inset-top);
  }

  .safe-bottom {
    padding-bottom: env(safe-area-inset-bottom);
  }

  html,
  body {
    height: 100%;
  }

  /* Responsive wax seal sizing */
  @media (max-width: 768px) {
    .wax-seal-mobile {
      height: 22px;
      width: 22px;
    }
  }

  /* Heading scale */
  .heading-xl {
    font-size: clamp(40px, 6vw, 88px);
    line-height: 1.1;
  }

  .heading-lg {
    font-size: clamp(32px, 4.5vw, 64px);
    line-height: 1.15;
  }

  .heading-md {
    font-size: clamp(24px, 3vw, 48px);
    line-height: 1.2;
  }

  .subhead {
    font-size: clamp(16px, 1.4vw, 22px);
    line-height: 1.6;
  }

  /* Consistent section spacing system */
  .section-padding-sm {
    @apply py-16 md:py-20;
  }

  .section-padding-md {
    @apply py-20 md:py-28;
  }

  .section-padding-lg {
    @apply py-24 md:py-32;
  }

  .section-padding-xl {
    @apply py-32 md:py-40;
  }

  /* Container widths */
  .container-narrow {
    @apply max-w-4xl mx-auto px-6;
  }

  .container-base {
    @apply max-w-6xl mx-auto px-6;
  }

  .container-wide {
    @apply max-w-7xl mx-auto px-6;
  }

  /* Boost visibility when CTA is on transparent header */
  .lvr-cta-boost {
    filter: drop-shadow(0 4px 10px rgba(0,0,0,.15));
  }

  /* Premium glass CTA button - Always-visible star of the show */
  .lvr-glass-cta {
    position: relative;
    display: inline-flex;
    align-items: center;
    justify-content: center;
    padding: 0.65rem 1.15rem;
    border-radius: 9999px;
    font-weight: 700;
    line-height: 1;
    isolation: isolate;
    color: #0e0e0e;
    text-decoration: none;
    cursor: pointer;
    overflow: hidden;
    background: rgba(255,255,255,0.45);
    backdrop-filter: blur(16px) saturate(130%);
    -webkit-backdrop-filter: blur(16px) saturate(130%);
    border: 1px solid rgba(0,0,0,0.08);
    box-shadow: 0 2px 8px rgba(0,0,0,0.06);
    transition: transform .15s ease, box-shadow .25s ease, filter .25s ease;
  }

  /* Base layer: Full smooth gradient foundation */
  .lvr-glass-cta::before {
    content: "";
    position: absolute;
    inset: -4px;
    z-index: -3;
    border-radius: inherit;
    background: linear-gradient(135deg,
      rgba(199,130,255,0.40) 0%,
      rgba(180,155,255,0.38) 20%,
      rgba(160,175,255,0.36) 40%,
      rgba(140,195,235,0.34) 60%,
      rgba(120,215,215,0.36) 80%,
      rgba(110,230,195,0.38) 100%
    );
    filter: blur(14px) saturate(135%);
  }

  /* Layer 1: Mesh gradient - flowing color field */
  .lvr-glass-cta::after {
    content: "";
    position: absolute;
    inset: -6px;
    z-index: -2;
    border-radius: inherit;
    background:
      radial-gradient(ellipse 140% 100% at 20% 40%, rgba(199,130,255,0.75) 0%, rgba(199,130,255,0.35) 40%, rgba(199,130,255,0.08) 70%),
      radial-gradient(ellipse 140% 100% at 80% 60%, rgba(125,180,255,0.70) 0%, rgba(125,180,255,0.32) 40%, rgba(125,180,255,0.08) 70%),
      radial-gradient(ellipse 120% 90% at 50% 80%, rgba(110,230,195,0.65) 0%, rgba(110,230,195,0.28) 40%, rgba(110,230,195,0.08) 70%);
    animation: lvrColorFlow 3s ease-in-out infinite;
    will-change: transform, opacity, filter;
  }

  /* Hover: Gradient reacts and rumbles like it's alive */
  .lvr-glass-cta:hover::after {
    animation: lvrHoverRumble 0.35s ease-in-out infinite, lvrColorFlow 3s ease-in-out infinite;
  }

  /* Sparkle flecks layer - sits on top of text */
  .lvr-cta-sparkles {
    pointer-events: none;
    position: absolute;
    inset: 0;
    z-index: 1;
    border-radius: inherit;
    background:
      radial-gradient(2px 2px at 22% 40%, rgba(255,255,255,0.9) 0%, transparent 70%),
      radial-gradient(2px 2px at 68% 58%, rgba(255,255,255,0.7) 0%, transparent 70%),
      radial-gradient(1.5px 1.5px at 44% 72%, rgba(255,255,255,0.8) 0%, transparent 70%);
    animation: lvrSparkle 1.8s ease-in-out infinite;
  }

  /* Hover: Sparkles react faster when anticipating touch */
  .lvr-glass-cta:hover .lvr-cta-sparkles {
    animation: lvrSparkle 0.3s ease-in-out infinite;
  }

  /* Hover state - brightness boost + spinning color glow around edges */
  .lvr-glass-cta:hover {
    filter: brightness(1.15);
    animation: lvrBorderPulse 1.2s ease-in-out infinite;
  }

  /* Active state - subtle press */
  .lvr-glass-cta:active {
    transform: translateY(0.5px) scale(0.985);
  }

  /* Transparent variant - for transparent header over hero */
  .lvr-glass-cta--transparent {
    background: rgba(255,255,255,0.35);
    border-color: rgba(255,255,255,0.15);
    color: #0e0e0e;
    box-shadow: 0 4px 12px rgba(0,0,0,0.18);
  }

  /* Respect user motion preferences - disable animations if reduced motion */
  @media (prefers-reduced-motion: reduce) {
    .lvr-glass-cta::before,
    .lvr-glass-cta::after,
    .lvr-cta-sparkles,
    .lvr-glass-cta:hover {
      animation: none !important;
    }
  }

  /* ============================================
     Page Transition Styles
     ============================================ */

  /* Initial page-load overlay (fades out once) */
  .lvr-initial-fade {
    position: fixed;
    inset: 0;
    z-index: 1000;
  }

  /* Radial mask container for click-origin transitions */
  .lvr-radial-mask {
    will-change: clip-path, opacity, filter;
    backface-visibility: hidden;
    -webkit-backface-visibility: hidden;
  }

  /* Prevent layout shift during page transitions */
  body {
    overflow-y: scroll; /* Always show scrollbar to prevent width shift */
  }

  /* Smooth content stability during transitions */
  main {
    min-height: 100vh;
    will-change: opacity, filter;
    backface-visibility: hidden;
    -webkit-backface-visibility: hidden;
    transform: translateZ(0); /* Force GPU acceleration */
  }

  /* Accessibility: reduce motion for page transitions */
  @media (prefers-reduced-motion: reduce) {
    .lvr-initial-fade {
      display: none;
    }
    .lvr-radial-mask {
      clip-path: none !important;
    }
  }

  /* Pinterest button shimmer effect */
  .btn-pinterest {
    background: #e60023;
    color: #fff;
    position: relative;
    overflow: hidden;
  }

  .btn-pinterest::after {
    content: "";
    position: absolute;
    inset: 0;
    background: radial-gradient(
      120% 120% at 10% 10%,
      rgba(255, 255, 255, 0.15),
      transparent 40%
    );
    transform: translateX(-30%);
    transition: transform 800ms ease;
  }

  .btn-pinterest:hover::after {
    transform: translateX(10%);
  }
}
